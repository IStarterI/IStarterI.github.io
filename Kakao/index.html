<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>카카오 계정으로 로그인 하기</title>
    <script src="//developers.kakao.com/sdk/js/kakao.min.js"></script>
  </head>
  <body>
    <form action="MagicFriends.html" method="post">
      <button type="submit" name="button">
        <a id="kakao-login-btn"></a>
      </button>
      <input type="hidden" name="res" value="res" id="res">
    </form>
  </body>
  <script type="text/javascript">
    var userNickname;
    var userPhoto;
    //<![CDATA[
      // 사용할 앱의 JavaScript 키를 설정해 주세요.
      Kakao.init('d93c132dd1fbab2036f4e032a170d077');
      // 카카오 로그인 버튼을 생성합니다.
      Kakao.Auth.createLoginButton({
        container: '#kakao-login-btn',
        success: function(authObj) {
          alert("Success");
          alert(JSON.stringify(authObj));
          Kakao.API.request({
            url: '/v1/user/me',
            success: function(res) {
              document.getElementById("res").value = res;
              userNickname = res.properties.nickname;
              userPhoto = res.properties.profile_image;
            },
  					fail: function(error) {
  						console.log(error);
  					}
          })
        },
        fail: function(err) {
           alert(JSON.stringify(err));
        }
      });
    //]]>
  </script>
</html>
